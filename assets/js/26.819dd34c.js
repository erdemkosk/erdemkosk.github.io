(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{468:function(t,e,s){"use strict";s.r(e);var a=s(4),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"rabbitmq-mail-consumer-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-mail-consumer-server"}},[t._v("#")]),t._v(" rabbitmq-mail-consumer-server")]),t._v(" "),s("p",[t._v("Rabbitmq-mail-consumer-server is an independent mail sending server that abstracts the sending mails from system. Services that want to send mail do not need to know where and how this server works ğŸ˜. Just make sure you're looking at the same rabbit mq channel.")]),t._v(" "),s("blockquote",[s("p",[t._v("Sending mail is abstracted from the whole system. You don't have to think âœŒï¸.")])]),t._v(" "),s("h3",{attrs:{id:"tech"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tech"}},[t._v("#")]),t._v(" Tech")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/hlDKK7Z.png",alt:"Tech"}}),t._v("\nRabbitmq-mail-consumer-server uses a number of open source projects to work properly:")]),t._v(" "),s("ul",[s("li",[t._v("[Node Js] - for runnig server")]),t._v(" "),s("li",[t._v("[Rabbit MQ] - for getting messages from another server")]),t._v(" "),s("li",[t._v("[Redis] - for checking email blacklist")])]),t._v(" "),s("h3",{attrs:{id:"for-blacklist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#for-blacklist"}},[t._v("#")]),t._v(" For Blacklist")]),t._v(" "),s("p",[t._v("You need to add a mail adress to redis.")]),t._v(" "),s("blockquote",[s("p",[t._v("/unsubscribe?email=(with encrypted mail)\n"),s("img",{attrs:{src:"https://i.imgur.com/saREwA7.png",alt:"Redis"}})])]),t._v(" "),s("h3",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("p",[t._v("Rabbitmq-mail-consumer-server requires "),s("a",{attrs:{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),s("OutboundLink")],1),t._v(" v8+ to run.")]),t._v(" "),s("p",[t._v("Install the dependencies and devDependencies and start the server.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" rabbitmq-mail-consumer-server\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" \n$ node app\n")])])]),s("p",[t._v("For Make A Docker Image:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ docker build -t  rabbitmq-mail-consumer-server "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n$ docker run --env-file .env -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v(":5000 rabbitmq-mail-consumer-server\n")])])]),s("p",[t._v("Pull From Docker Hub")]),t._v(" "),s("ul",[s("li",[t._v("latest")]),t._v(" "),s("li",[t._v("rpi => ARM build for raspperry pi")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ docker run --env-file .env -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v(":5000 erdemkosk/rabbitmq-mail-consumer-server:latest\nor\n$ docker run --env-file .env -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v(":5000 erdemkosk/rabbitmq-mail-consumer-server:rpi\n")])])]),s("h3",{attrs:{id:"running-stages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-stages"}},[t._v("#")]),t._v(" Running Stages")]),t._v(" "),s("p",[t._v("You need to send messages from your server to rabbit mq channel when you need to send mail.\nForget Password Mail:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("  rabbitMq.sendRabbitMQ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mailChannel'")]),t._v(", JSON.stringify"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    email: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'testme-app@yandex.ru'")]),t._v(",\n    nameSurname: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Erdem KÃ¶ÅŸk'")]),t._v(",\n    type: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'forget'")]),t._v(",\n    appName: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Test Me'")]),t._v(",\n    forgetTitle: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Åifreni UnutmuÅŸsun :('")]),t._v(",\n    forgetMessage: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<b>nameSurname</b> ÅŸifreni unutmuÅŸsun! AÅŸaÄŸÄ±daki adÄ±mlarÄ± takip edelim.'")]),t._v(",\n    mailIcon: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://img.icons8.com/clouds/100/000000/jake.png'")]),t._v(",\n    webSiteLink: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),t._v(",\n    webSiteLinkButton: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hadi BaÅŸlayalÄ±m!'")]),t._v(",\n    warningText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Åifre sÄ±fÄ±rlama talebini siz yollamadÄ±ysanÄ±z, lÃ¼tfen dikkate almayÄ±n !'")]),t._v(",\n    sincerelyText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Sevgilerle'")]),t._v(",\n    needHelpText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YardÄ±m mÄ± lazÄ±m?'")]),t._v(",\n    needHelpLink: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://erdemkosk.com'")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Register Mail:")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" rabbitMq.sendRabbitMQ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mailChannel'")]),t._v(", JSON.stringify"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    email: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'testme-app@yandex.ru'")]),t._v(",\n    nameSurname: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Erdem KÃ¶ÅŸk'")]),t._v(",\n    type: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'register'")]),t._v(",\n    appName: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Test Me'")]),t._v(",\n    welcomeTitle: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HoÅŸ Geldin!'")]),t._v(",\n    welcomeMessage: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Seni aramÄ±zda gÃ¶rmek Ã§ok gÃ¼zel <b> nameSurname </b> ! <br/> Ä°ngilizce kelime Ã¶ÄŸrenmenin en kolay yolu ğŸ¤™. BoÅŸ zamanlarÄ±nda senin iÃ§in oluÅŸturulan rastgele ingilizce kelime testlerini cevapla ğŸ™ Kendini geliÅŸtir!'")]),t._v(",\n    mailIcon: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://img.icons8.com/clouds/100/000000/america.png'")]),t._v(",\n    webSiteLink: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),t._v(",\n    webSiteLinkButton: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hadi BaÅŸlayalÄ±m!'")]),t._v(",\n    thanksText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Projemize destek verdiÄŸin iÃ§in teÅŸekkÃ¼r ederiz!'")]),t._v(",\n    sincerelyText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Sevgilerle'")]),t._v(",\n    needHelpText: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YardÄ±m mÄ± lazÄ±m?'")]),t._v(",\n    needHelpLink: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://erdemkosk.com'")]),t._v(",\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("When messages arrvied rabbitmq-mail-consumer-server, it controls mail in blacklist (from redis).")]),t._v(" "),s("p",[t._v("If In Not Blacklist:\n"),s("img",{attrs:{src:"https://i.imgur.com/2cWUecy.png",alt:"In Not Blacklist"}})]),t._v(" "),s("p",[t._v("If In Blacklist:\n"),s("img",{attrs:{src:"https://i.imgur.com/bFe9r4e.png",alt:"In Blacklist"}})]),t._v(" "),s("h3",{attrs:{id:"env-variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env-variables"}},[t._v("#")]),t._v(" Env Variables")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Env")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("Example")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("NODE_ENV")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("dev")])]),t._v(" "),s("tr",[s("td",[t._v("RABBITMQ_URL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("amqp url")])]),t._v(" "),s("tr",[s("td",[t._v("RABBITMQ_CHANNEL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("amqp channel")])]),t._v(" "),s("tr",[s("td",[t._v("MAIL_USER")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("user mail")])]),t._v(" "),s("tr",[s("td",[t._v("MAIL_PASS")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yser mail password")])]),t._v(" "),s("tr",[s("td",[t._v("MAIL_HOST")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("smtp mail server")])]),t._v(" "),s("tr",[s("td",[t._v("MAIL_PORT")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("smtp mail port")])]),t._v(" "),s("tr",[s("td",[t._v("REDIS_HOST")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("redis url")])]),t._v(" "),s("tr",[s("td",[t._v("REDIS_PASS")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("redis password")])]),t._v(" "),s("tr",[s("td",[t._v("REDIS_PORT")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("redis port")])]),t._v(" "),s("tr",[s("td",[t._v("URL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("unsubscribe url path")])])])]),t._v(" "),s("h3",{attrs:{id:"mail-types"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mail-types"}},[t._v("#")]),t._v(" Mail Types")]),t._v(" "),s("p",[t._v("There are two types of mail. Its type can be easily increased and different parameters can be sent for each.ğŸ™")]),t._v(" "),s("ul",[s("li",[t._v("Register")]),t._v(" "),s("li",[t._v("Forget")])]),t._v(" "),s("p",[t._v("Register:\n"),s("img",{attrs:{src:"https://i.imgur.com/72AEhxE.png",alt:"Register"}}),t._v("\nForget:\n"),s("img",{attrs:{src:"https://i.imgur.com/9up6jB3.png",alt:"Forget"}})])])}),[],!1,null,null,null);e.default=n.exports}}]);